# 标题栏隐藏异常问题排查方案

## 1. 问题现象描述
- 在页面滚动、编辑、切换等操作后，标题栏（`.note-header`）下的操作区（`.note-header-top`）或标题输入框（`.note-title-row`）出现异常隐藏、动画突变、闪烁、布局错乱等现象。

## 2. 初步确认
- 明确你遇到的是：
  - 只有标题输入框应被隐藏，操作区应常驻。
  - 问题是在 PC 端、移动端，还是两者都有？
  - 问题是“动画不平滑”还是“内容被全部隐藏”？

## 3. CSS 排查
- 检查 `.note-header.shrink .note-title-row` 是否只影响 `.note-title-row`，不要影响 `.note-header-top`。
- 检查是否有如下样式：
  - `max-height: 0`（推荐，动画平滑）
  - `height: 0`（不推荐，动画不平滑且可能塌陷）
  - `overflow: hidden` 是否只在 `.note-title-row` 上设置
- 检查是否有其它选择器影响 `.note-header-top`，如：
  - `.note-header.shrink * { ... }`
  - `.note-header.shrink > * { ... }`
  - `.note-header.shrink .note-header-top { ... }`
- 检查媒体查询（`@media`）下是否有特殊规则影响移动端样式。
- 检查动画 `transition` 是否只作用于 `max-height` 和 `opacity`。

## 4. JS 排查
- 检查 JS 是否只在滚动/切换时给 `.note-header` 加/去掉 `.shrink` 类。
- 检查是否有 JS 直接操作 `.note-header-top` 的 `display`、`opacity`、`height` 等属性。
- 检查切换编辑/预览、滚动、侧栏操作等事件是否有副作用影响标题区。

## 5. 结构排查
- 用开发者工具（F12）实时查看 DOM 结构：
  - `.note-header` 下应有 `.note-title-row` 和 `.note-header-top` 两个直接子元素。
  - 切换/滚动时，`.note-header-top` 应始终可见，`.note-title-row` 的 `max-height` 和 `opacity` 应变化。
- 检查父容器（`.note-header`）的高度是否足够容纳 `.note-header-top`。

## 6. 移动端特殊情况
- 检查 `@media (max-width: 768px)` 下 `.note-header`、`.note-title-row`、`.note-header-top` 的样式。
- 检查是否有 JS 针对移动端做了特殊处理。

## 7. 开发者工具使用建议
- 用“元素”面板实时观察类名和样式变化。
- 用“样式”面板查看实际生效的 CSS 规则和优先级。
- 用“网络”面板确认 CSS 是否被正确加载。
- 用“控制台”查看 JS 是否有报错或异常。

## 8. 常见陷阱
- 选择器写得过宽，影响到所有子元素。
- 父容器高度塌陷，导致兄弟元素被裁剪。
- 媒体查询下样式未同步修改。
- JS 误操作 display/opacity/height。

## 9. 建议反馈信息
- 问题发生时的操作步骤。
- 问题发生时的截图（包含 DOM 结构和样式面板）。
- 相关 CSS/JS 代码片段。
- 设备和浏览器信息。

---
如按以上方案排查仍无法定位问题，请将上述信息反馈给开发者或 AI 助手协助进一步分析。 